<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Java Script 编码规范 | Jeck_Zhang</title>
  <meta name="author" content="Jeck Zhang">
  
  <meta name="description" content="zxc&#39;s blog | java | ruby | perl | linux">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Java Script 编码规范"/>
  <meta property="og:site_name" content="Jeck_Zhang"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link type="image/x-icon" href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Jeck_Zhang" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="/js/jquery.min.js"></script>
  
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45019001-1', 'topdna.org');
  ga('send', 'pageview');

</script>


</head>


<body>
  <!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0027_Simplified Chinese.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Jeck_Zhang</a></h1>
  <h2><a href="/">Write the Code. Change the World.</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="http://weibo.com/zxc337">weibo</a></li>
    
      <li><a href="/2014/10/01/aboutMe/">关于</a></li>
    
      <li><a href="/tags/随感/">随感</a></li>
    
      <li><a href="/tags/技术/">技术</a></li>
    
      <li><a href="/tags/理财/">理财</a></li>
    
      <li><a href="/tags/生活/">生活</a></li>
    
      <li><a href="/archives">归档</a></li>
    
    <li><a href="/atom.xml">RSS</a></li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <time datetime="2014-05-17T05:42:35.000Z"><a href="/2014/05/17/javascript/">5月 17 2014</a></time>
      
      
  
    <h1 class="title">Java Script 编码规范</h1>
  

    </header>
    <div class="entry">
      
        <p>以下文档大多来自:</p>
<ul>
<li><a href="http://wyz.67ge.com/google-js/javascriptguide.xml" target="_blank" rel="external">Google JavaScript 编码规范指南</a></li>
<li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/zh_CN" target="_blank" rel="external">Idiomatic 风格</a></li>
</ul>
<p>参考规范</p>
<ul>
<li><a href="http://es5.github.com/" target="_blank" rel="external">ECMAScript 5.1 注解版</a></li>
<li><a href="http://ecma-international.org/ecma-262/5.1/" target="_blank" rel="external">EcmaScript 语言规范, 5.1 版</a><br>基本原则: 无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。</li>
</ul>
<h3 id="前言">前言</h3>
<p>下面的章节描述的是一个 合理 的现代 JavaScript 开发风格指南，并非硬性规定。其想送出的核心理念是高度统一的代码风格（the law of code style consistency）。你为项目所择风格都应为最高准则。作为一个描述放置于你的项目中，并链接到这个文档作为代码风格一致性、可读性和可维护性的保证。</p>
<h3 id="规范概要">规范概要</h3>
<h4 id="1-_JS/CSS_文件编码统一采用_UTF8编码">1. JS/CSS 文件编码统一采用 UTF8编码</h4>
<h4 id="2-_代码缩进使用4个空格缩进替代_tab_缩进">2. 代码缩进使用4个空格缩进替代 tab 缩进</h4>
<h4 id="3-_一行代码长度尽量保持80列左右">3. 一行代码长度尽量保持80列左右</h4>
<h4 id="4-_如果编辑器支持在文件保存的时候自动删除行末和空行中的空格(注意:要么全部采用，要么全不采用，否则会产生过多的diff信息)">4. 如果编辑器支持在文件保存的时候自动删除行末和空行中的空格(注意:要么全部采用，要么全不采用，否则会产生过多的diff信息)</h4>
<h4 id="5-_JS/CSS_最终发布到产品中的时候需要被压缩，以减小静态资源文件大小，提升页面加载速度">5. JS/CSS 最终发布到产品中的时候需要被压缩，以减小静态资源文件大小，提升页面加载速度</h4>
<h4 id="6-_JS里声明变量必须加上_var_关键字，推荐一个_var_同时声明多个变量，或者一组有逻辑关系的变量，避免一个变量一个_var-">6. JS里声明变量必须加上 var 关键字，推荐一个 var 同时声明多个变量，或者一组有逻辑关系的变量，避免一个变量一个 var.</h4>
<h4 id="7-_使用_Array_和_Object_语法直接声明并将其初始化,更易读且性能更好,_而不使用_Array_和_Object_构造器-">7. 使用 Array 和 Object 语法直接声明并将其初始化,更易读且性能更好, 而不使用 Array 和 Object 构造器.</h4>
<h4 id="8-_JS里使用单引号_(‘)_优于双引号_(“)-">8. JS里使用单引号 (‘) 优于双引号 (“).</h4>
<h4 id="9-_JS代码结尾统一约定加’;’">9. JS代码结尾统一约定加’;’</h4>
<h4 id="10-_没有特殊原因避免使用_with/eval">10. 没有特殊原因避免使用 with/eval</h4>
<h4 id="11-_对于if/else等后面的语句即使只有一行代码也需要在该行代码的首尾加上’{}’-">11. 对于if/else等后面的语句即使只有一行代码也需要在该行代码的首尾加上’{}’.</h4>
<h4 id="12-_字符串拼接在少量(次数为个位数)的情况下可以使用’+’,_大量的时候使用数组_join(),_或者尽可能采用模板引擎渲染：比如jsRender等,_如果是Extjs可以采用XTemplate-">12. 字符串拼接在少量(次数为个位数)的情况下可以使用’+’, 大量的时候使用数组 join(), 或者尽可能采用模板引擎渲染：比如jsRender等, 如果是Extjs可以采用XTemplate.</h4>
<h4 id="13-_对于数组赋值操作快于_push()操作,_所以尽量使用赋值操作-">13. 对于数组赋值操作快于 push()操作, 所以尽量使用赋值操作.</h4>
<h4 id="14-_for循环遍历：for(var_i_=_0,_l_=_arr-length;_i_&lt;_l;_i++){//_doSomething_here_}_采用这种方式而不是_i_&lt;_arr-length,_前一种方式只会计算一次_arr_的长度，而后一种方式会计算数组长度_arr-length_+_1_次，效率比较低">14. for循环遍历：for(var i = 0, l = arr.length; i &lt; l; i++){// doSomething here } 采用这种方式而不是 i &lt; arr.length, 前一种方式只会计算一次 arr 的长度，而后一种方式会计算数组长度 arr.length + 1 次，效率比较低</h4>
<h4 id="15-_字符串转换为整数，推荐使用_parseInt(num,_10)_这种方式，+num_写法简单，在操作次数极少的情况下也可以酌情使用。">15. 字符串转换为整数，推荐使用 parseInt(num, 10) 这种方式，+num 写法简单，在操作次数极少的情况下也可以酌情使用。</h4>
<h4 id="16-_变量比较的时候总是判断最好、最精确的值，推荐使用’===’少用’==’(可以参考jQuery代码里面,_可以看到只有在’==_null’的时候才可能使用’==’，其他情况一律使用的是’===’)-">16. 变量比较的时候总是判断最好、最精确的值，推荐使用’===’少用’==’(可以参考jQuery代码里面, 可以看到只有在’== null’的时候才可能使用’==’，其他情况一律使用的是’===’).</h4>
<h4 id="17-_JS里变量命名规范使用_functionNamesLikeThis,_variableNamesLikeThis,_ClassNamesLikeThis,_EnumNamesLikeThis,_methodNamesLikeThis,_和_SYMBOLIC_CONSTANTS_LIKE_THIS,_尤其不要跟python里面的变量命名方式混淆了-">17. JS里变量命名规范使用 functionNamesLikeThis, variableNamesLikeThis, ClassNamesLikeThis, EnumNamesLikeThis, methodNamesLikeThis, 和 SYMBOLIC_CONSTANTS_LIKE_THIS, 尤其不要跟python里面的变量命名方式混淆了.</h4>
<h4 id="18-_JS文件名应该使用小写字符,_以避免在有些系统平台上不识别大小写的命名方式-_文件名以-js结尾,_不要包含除_‘-‘_和_‘‘_外的标点符号(使用_‘-‘_优于_‘‘),_我们约定统一使用js-file-name-js这种类型，对于template文件命名方式为_template_name-html形式-">18. JS文件名应该使用小写字符, 以避免在有些系统平台上不识别大小写的命名方式. 文件名以.js结尾, 不要包含除 ‘-‘ 和 ‘‘ 外的标点符号(使用 ‘-‘ 优于 ‘‘), 我们约定统一使用js-file-name.js这种类型，对于template文件命名方式为 template_name.html形式.</h4>
<h4 id="19-_所有的html_DOM里面的id,_Extjs配置项里面的id_以及所有样式里面的_class命名使用中划线，如’id-name’/‘class-name’-">19. 所有的html DOM里面的id, Extjs配置项里面的id 以及所有样式里面的 class命名使用中划线，如’id-name’/‘class-name’.</h4>
<h4 id="20-公共的js第三方类库放在static/js/common/lib下，jQuery相关类库放在static/js/common/lib/jQplugin下，我们自己开发的公共类库放在static/js/common下">20.公共的js第三方类库放在static/js/common/lib下，jQuery相关类库放在static/js/common/lib/jQplugin下，我们自己开发的公共类库放在static/js/common下</h4>
<h4 id="21-_鉴于有很多代码是复制粘贴过来的，所以大家要保证自己的代码风格良好且易于阅读，不然别人拷过去后不好的风格就蔓延开了，而且会导致其他人效仿。">21. 鉴于有很多代码是复制粘贴过来的，所以大家要保证自己的代码风格良好且易于阅读，不然别人拷过去后不好的风格就蔓延开了，而且会导致其他人效仿。</h4>
<h4 id="22-_对于复制粘贴然后做相应修改以实现功能的代码，请务必清理干净，不要有’忘了删除的不影响逻辑的代码’，同时记得将变量名改成适合当前业务场景的有意义的变量名,_不要因为不影响逻辑就保留原来的不适合当前场景的名字">22. 对于复制粘贴然后做相应修改以实现功能的代码，请务必清理干净，不要有’忘了删除的不影响逻辑的代码’，同时记得将变量名改成适合当前业务场景的有意义的变量名, 不要因为不影响逻辑就保留原来的不适合当前场景的名字</h4>
<h4 id="23-_对于系统中出现的大段注释的、过时的、废弃的代码务必及时清理干净，谁制造谁清理，否则其他人也不敢清理，越积越多">23. 对于系统中出现的大段注释的、过时的、废弃的代码务必及时清理干净，谁制造谁清理，否则其他人也不敢清理，越积越多</h4>
<h4 id="24-_不要使用魔法数字，尽量定义一个常量来表示该数字，并加上相应的注释，否则后期可能出现因为数字变化而导致牵一发而动全身，需要到处修改，增加维护成本">24. 不要使用魔法数字，尽量定义一个常量来表示该数字，并加上相应的注释，否则后期可能出现因为数字变化而导致牵一发而动全身，需要到处修改，增加维护成本</h4>
<h4 id="25-_注释尽量采用jsdoc的代码注释风格，普通业务代码不做要求，不过通用js类库要求尽量详尽以方便其他人阅读使用">25. 注释尽量采用jsdoc的代码注释风格，普通业务代码不做要求，不过通用js类库要求尽量详尽以方便其他人阅读使用</h4>
<h4 id="26-_在开发相应功能的时候尽量抽象化、组件化、通用化：考虑这个东西其他地方会不会用到，能不能做成一个组件？而不是类似的代码到处复制、修改或者让大家都去写一遍">26. 在开发相应功能的时候尽量抽象化、组件化、通用化：考虑这个东西其他地方会不会用到，能不能做成一个组件？而不是类似的代码到处复制、修改或者让大家都去写一遍</h4>
<h4 id="27-_类似地，在解决问题的时候要考虑下其他地方会不会存在同样的问题？能不能统一解决掉？尤其对于类似ExtJs的Bug这种，能不能做最少的改动解决所有同样的问题,类似于全局补丁-">27. 类似地，在解决问题的时候要考虑下其他地方会不会存在同样的问题？能不能统一解决掉？尤其对于类似ExtJs的Bug这种，能不能做最少的改动解决所有同样的问题,类似于全局补丁.</h4>
<h4 id="28-_代码风格跟其他JS文件的代码风格保持一致">28. 代码风格跟其他JS文件的代码风格保持一致</h4>
<h4 id="29-_新增、修改、查看等表单在_popup的时候需要重新初始化清除原来数据">29. 新增、修改、查看等表单在 popup的时候需要重新初始化清除原来数据</h4>
<h4 id="30-_代码提交前用JSHint检查一下">30. 代码提交前用JSHint检查一下</h4>
<h3 id="前端资源Build">前端资源Build</h3>
<p>项目必须总是提供一些通用的方法来检验（can be linted）、测试和压缩源码以为产品阶段使用做准备。对于此类工作 Ben Alman 所写的 <a href="https://github.com/cowboy/grunt" target="_blank" rel="external">grunt</a> 可谓首屈一指。通过简单的配置即可完成自动对CSS进行检查/压缩/合并，对JS进行检查/压缩/合并，对html文件进行压缩，删除创建目录，拷贝文件，压缩打包等，十分方便。</p>
<p>参考的grunt配置文件:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Grunt file for front end resource check/minify/compress.</div><div class="line"> */</div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span><span class="params">(grunt)</span> </span>{</div><div class="line">  grunt.initConfig({</div><div class="line">    pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</div><div class="line">    jshint: {</div><div class="line">      options: {</div><div class="line">        asi       : <span class="literal">true</span>,</div><div class="line">        curly     : <span class="literal">false</span>,</div><div class="line">        eqeqeq    : <span class="literal">true</span>,</div><div class="line">        immed     : <span class="literal">false</span>,</div><div class="line">        latedef   : <span class="literal">true</span>,</div><div class="line">        newcap    : <span class="literal">true</span>,</div><div class="line">        noarg     : <span class="literal">true</span>,</div><div class="line">        sub       : <span class="literal">true</span>,</div><div class="line">        undef     : <span class="literal">true</span>,</div><div class="line">        boss      : <span class="literal">true</span>,</div><div class="line">        eqnull    : <span class="literal">true</span>,</div><div class="line">        smarttabs : <span class="literal">true</span>,</div><div class="line">        browser   : <span class="literal">true</span>,</div><div class="line">        jquery    : <span class="literal">true</span>,</div><div class="line">        white     : <span class="literal">false</span>,</div><div class="line">        laxbreak  : <span class="literal">false</span>,</div><div class="line">        laxcomma  : <span class="literal">true</span>,</div><div class="line">        expr      : <span class="literal">true</span>,</div><div class="line">        devel     : <span class="literal">false</span>,</div><div class="line">        globals   : {</div><div class="line">          <span class="built_in">module</span>    : <span class="literal">true</span>,</div><div class="line">          Mousetrap : <span class="literal">true</span>,</div><div class="line">          jQuery    : <span class="literal">true</span></div><div class="line">        }</div><div class="line">      },</div><div class="line">      all: [<span class="string">'Gruntfile.js'</span>, <span class="string">'js/**/*.js'</span>, <span class="string">'!js/**/*.min.js'</span>, <span class="string">'!js/json2.js'</span>, <span class="string">'!js/jquery.simplemodal.js'</span>]</div><div class="line">    },</div><div class="line">    clean: {</div><div class="line">      release: {</div><div class="line">        src: [<span class="string">'release/'</span>]</div><div class="line">      }</div><div class="line">    },</div><div class="line">    uglify: {</div><div class="line">      options: {</div><div class="line">        banner: <span class="string">'/*! &lt;%= pkg.description %&gt;  Ver: &lt;%= pkg.version %&gt;  Date: &lt;%= grunt.template.today("yyyy/mm/dd HH:MM:ss") %&gt; */\n'</span></div><div class="line">      },</div><div class="line">      dist: {</div><div class="line">        <span class="comment">// Grunt will search for "**/?.js" under "js/" when the "uglify" task</span></div><div class="line">        <span class="comment">// runs and build the appropriate src-dest file mappings then, so you</span></div><div class="line">        <span class="comment">// don't need to update the Gruntfile when files are added or removed.</span></div><div class="line">        files: [</div><div class="line">          {</div><div class="line">            expand : <span class="literal">true</span>,                                  <span class="comment">// Enable dynamic expansion.</span></div><div class="line">            cwd    : <span class="string">'js/'</span>,                                 <span class="comment">// Src matches are relative to this path.</span></div><div class="line">            src    : [<span class="string">'jquery.simplemodal.js'</span>,<span class="string">'index.js'</span>],  <span class="comment">// Actual pattern(s) to match.</span></div><div class="line">            dest   : <span class="string">'release/js/'</span>                          <span class="comment">// Destination path prefix.</span></div><div class="line">            <span class="comment">// ext : '.js'                                  // Dest filepaths will have this extension. '.min.js' is recommeded.</span></div><div class="line">          }</div><div class="line">        ]</div><div class="line">      }</div><div class="line">    },</div><div class="line">    cssmin: {</div><div class="line">      minify: {</div><div class="line">        expand : <span class="literal">true</span>,</div><div class="line">        cwd    : <span class="string">'style/'</span>,</div><div class="line">        src    : [<span class="string">'*.css'</span>],</div><div class="line">        dest   : <span class="string">'release/style/'</span>,</div><div class="line">        ext    : <span class="string">'.css'</span></div><div class="line">      }</div><div class="line">    },</div><div class="line">    htmlmin: {                                     <span class="comment">// Task</span></div><div class="line">      dist: {                                      <span class="comment">// Target</span></div><div class="line">        options: {                                 <span class="comment">// Target options</span></div><div class="line">          removeComments: <span class="literal">true</span>,</div><div class="line">          collapseWhitespace: <span class="literal">true</span></div><div class="line">        },</div><div class="line">        files: {                                   <span class="comment">// Dictionary of files</span></div><div class="line">          <span class="string">'release/index.html'</span>: <span class="string">'index.html'</span>       <span class="comment">// 'destination': 'source'</span></div><div class="line">        }</div><div class="line">      }</div><div class="line">    },</div><div class="line">    copy: {</div><div class="line">      main: {</div><div class="line">        files: [</div><div class="line">          {expand: <span class="literal">true</span>, cwd: <span class="string">'.'</span>, src: [<span class="string">'js/*.min.js'</span>, <span class="string">'js/json2.js'</span>, <span class="string">'images/*'</span>], dest: <span class="string">'release/'</span>}</div><div class="line">        ]</div><div class="line">      }</div><div class="line">    },</div><div class="line">    compress: {</div><div class="line">      main: {</div><div class="line">        options: {</div><div class="line">          archive: <span class="string">'release/executable.zip'</span>         <span class="comment">// make a zipfile</span></div><div class="line">        },</div><div class="line">        files: [</div><div class="line">          <span class="comment">// {src: ['release/**'], dest: 'release/'},                        // includes files in path and its subdirs</span></div><div class="line">          {expand: <span class="literal">true</span>, cwd: <span class="string">'release/'</span>, src: [<span class="string">'**'</span>], dest: <span class="string">'executable/'</span>}  <span class="comment">// makes all src relative to cwd</span></div><div class="line">        ]</div><div class="line">      }</div><div class="line">    }</div><div class="line">  });</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-jshint'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-clean'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-htmlmin'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-copy'</span>);</div><div class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-compress'</span>);</div><div class="line">  grunt.registerTask(<span class="string">'min'</span>    , [<span class="string">'clean'</span>, <span class="string">'uglify'</span>, <span class="string">'cssmin'</span>, <span class="string">'htmlmin'</span>, <span class="string">'copy'</span>, <span class="string">'compress'</span>]);</div><div class="line">  grunt.registerTask(<span class="string">'check'</span>  , [<span class="string">'jshint'</span>]);</div><div class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'jshint'</span>, <span class="string">'clean'</span>, <span class="string">'uglify'</span>, <span class="string">'cssmin'</span>, <span class="string">'htmlmin'</span>, <span class="string">'copy'</span>, <span class="string">'compress'</span>]);</div><div class="line">};</div></pre></td></tr></table></figure>

<h3 id="规范详情">规范详情</h3>
<p>JavaScript 编码风格</p>
<p>空白<br><em>永远都不要混用空格和Tab。
</em>开始一个项目，在写代码之前，选择软缩进（空格）或者 Tab（作为缩进方式），并将其作为最高准则。<br>    <em>为了可读, 我总是推荐在你的编辑中设计4个字母宽度的缩进 — 这等同于四个空格或者四个空格替代一个 Tab。
</em>如果你的编辑器支持，请总是打开 “显示不可见字符” 这个设置。好处是：<br>    <em>保证一致性
    </em>去掉行末的空格<br>    <em>去掉空行的空格
    </em>提交和对比更具可读性</p>
<p>行末和空行<br>留白会破坏 diff 并使diff 结果变得更不可读。考虑包括一个预提交的 hook 自动删除行末和空行中的空格。<br>花括号, 换行</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// if/else/for/while/try 通常都有小括号、花括号和多行</span></div><div class="line"><span class="comment">// 这有助于可读, 以下是很糟糕的写法</span></div><div class="line"><span class="keyword">if</span>(condition) doSomething();</div><div class="line"><span class="keyword">while</span>(condition) iterating++;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++) someIterativeFn();</div></pre></td></tr></table></figure>

<p>命名</p>
<p>通常, 使用 functionNamesLikeThis, variableNamesLikeThis, ClassNamesLikeThis, EnumNamesLikeThis, methodNamesLikeThis, 和 SYMBOLIC_CONSTANTS_LIKE_THIS.</p>
<p>属性和方法</p>
<p>文件或类中的 私有 属性, 变量和方法名应该以下划线 “_” 开头.<br>保护 属性, 变量和方法名不需要下划线开头, 和公共变量名一样.</p>
<p>方法和函数参数</p>
<p>可选参数以 opt_ 开头.<br>函数的参数个数不固定时, 应该添加最后一个参数 var_args 为参数的个数. 你也可以不设置 var_args而取代使用 arguments.<br>可选和可变参数应该在 @param 标记中说明清楚. 虽然这两个规定对编译器没有任何影响, 但还是请尽量遵守<br>Getters 和 Setters<br>Getters 和 setters 并不是必要的. 但只要使用它们了, 就请将 getters 命名成 getFoo() 形式, 将 setters 命名成 setFoo(value) 形式. (对于布尔类型的 getters, 使用 isFoo() 也可.)</p>
<p>命名空间</p>
<p>JavaScript 不支持包和命名空间.<br>不容易发现和调试全局命名的冲突, 多个系统集成时还可能因为命名冲突导致很严重的问题. 为了提高 JavaScript 代码复用率, 我们遵循下面的约定以避免冲突.<br>为全局代码使用命名空间<br>在全局作用域上, 使用一个唯一的, 与工程/库相关的名字作为前缀标识. 比如, 你的工程是 “Project Sloth”, 那么命名空间前缀可取为 sloth.*.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sloth = {};</div><div class="line">sloth.sleep = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  ...</div><div class="line">};</div></pre></td></tr></table></figure>

<p>许多 JavaScript 库, 包括 the Closure Library and Dojo toolkit 为你提供了声明你自己的命名空间的函数. 比如:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">goog.provide(<span class="string">'sloth'</span>);</div><div class="line">sloth.sleep = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  ...</div><div class="line">};</div></pre></td></tr></table></figure>

<p>明确命名空间所有权<br>当选择了一个子命名空间, 请确保父命名空间的负责人知道你在用哪个子命名空间, 比如说, 你为工程 ‘sloths’ 创建一个 ‘hats’ 子命名空间, 那确保 Sloth 团队人员知道你在使用 sloth.hats.<br>外部代码和内部代码使用不同的命名空间<br>“外部代码” 是指来自于你代码体系的外部, 可以独立编译. 内外部命名应该严格保持独立. 如果你使用了外部库, 他的所有对象都在 foo.hats. 下, 那么你自己的代码不能在 foo.hats.下命名, 因为很有可能其他团队也在其中命名.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">foo.require(<span class="string">'foo.hats'</span>);</div><div class="line"><span class="comment">/**</span></div><div class="line"> * WRONG -- Do NOT do this.</div><div class="line"> * @constructor</div><div class="line"> * @extend {foo.hats.RoundHat}</div><div class="line"> */</div><div class="line">foo.hats.BowlerHat = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">};</div></pre></td></tr></table></figure>

<p>重命名那些名字很长的变量, 提高可读性<br>主要是为了提高可读性. 局部空间中的变量别名只需要取原名字的最后部分.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @constructor</div><div class="line"> */</div><div class="line">some.long.namespace.MyClass = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">};</div><div class="line"><span class="comment">/**</span></div><div class="line"> * @param {some.long.namespace.MyClass} a</div><div class="line"> */</div><div class="line">some.long.namespace.MyClass.staticHelper = <span class="function"><span class="keyword">function</span><span class="params">(a)</span> </span>{</div><div class="line">  ...</div><div class="line">};</div><div class="line">myapp.main = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">var</span> MyClass = some.long.namespace.MyClass;</div><div class="line">  <span class="keyword">var</span> staticHelper = some.long.namespace.MyClass.staticHelper;</div><div class="line">  staticHelper(<span class="keyword">new</span> MyClass());</div><div class="line">};</div></pre></td></tr></table></figure>

<p>除非是枚举类型, 不然不要访问别名变量的属性.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** @enum {string} */</span></div><div class="line">some.long.namespace.Fruit = {</div><div class="line">  APPLE: <span class="string">'a'</span>,</div><div class="line">  BANANA: <span class="string">'b'</span></div><div class="line">};</div><div class="line">myapp.main = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">var</span> Fruit = some.long.namespace.Fruit;</div><div class="line">  <span class="keyword">switch</span> (fruit) {</div><div class="line">    <span class="keyword">case</span> Fruit.APPLE:</div><div class="line">      ...</div><div class="line">    <span class="keyword">case</span> Fruit.BANANA:</div><div class="line">      ...</div><div class="line">  }</div><div class="line">};</div><div class="line">myapp.main = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">var</span> MyClass = some.long.namespace.MyClass;</div><div class="line">  MyClass.staticHelper(<span class="literal">null</span>);</div><div class="line">};</div></pre></td></tr></table></figure>

<p>不要在全局范围内创建别名, 而仅在函数块作用域中使用.<br>文件名<br>文件名应该使用小写字符, 以避免在有些系统平台上不识别大小写的命名方式. 文件名以.js结尾, 不要包含除 - 和 外的标点符号(使用 - 优于 ).<br>自定义 toString() 方法<br>应该总是成功调用且不要抛异常.<br>可自定义 toString() 方法, 但确保你的实现方法满足: (1) 总是成功 (2) 没有其他负面影响. 如果不满足这两个条件, 那么可能会导致严重的问题, 比如, 如果 toString() 调用了包含 assert 的函数, assert 输出导致失败的对象, 这在 toString() 也会被调用.<br>延迟初始化<br>可以<br>没必要在每次声明变量时就将其初始化.<br>明确作用域<br>任何时候都需要<br>任何时候都要明确作用域 - 提高可移植性和清晰度. 例如, 不要依赖于作用域链中的 window 对象. 可能在其他应用中, 你函数中的 window 不是指之前的那个窗口对象.<br>代码格式化<br>大括号<br>分号会被隐式插入到代码中, 所以你务必在同一行上插入大括号. 例如:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (something) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">} <span class="keyword">else</span> {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>数组和对象的初始化<br>如果初始值不是很长, 就保持写在单行上:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];  <span class="comment">// No space after [ or before ].</span></div><div class="line"><span class="keyword">var</span> obj = {a: <span class="number">1</span>, b: <span class="number">2</span>, c: <span class="number">3</span>};  <span class="comment">// No space after { or before }.</span></div></pre></td></tr></table></figure>

<p>初始值占用多行时, 缩进2个空格.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Object initializer.</span></div><div class="line"><span class="keyword">var</span> inset = {</div><div class="line">  top: <span class="number">10</span>,</div><div class="line">  right: <span class="number">20</span>,</div><div class="line">  bottom: <span class="number">15</span>,</div><div class="line">  left: <span class="number">12</span></div><div class="line">};</div><div class="line"><span class="comment">// Array initializer.</span></div><div class="line"><span class="keyword">this</span>.rows_ = [</div><div class="line">  <span class="string">'"Slartibartfast" &lt;fjordmaster@magrathea.com&gt;'</span>,</div><div class="line">  <span class="string">'"Zaphod Beeblebrox" &lt;theprez@universe.gov&gt;'</span>,</div><div class="line">  <span class="string">'"Ford Prefect" &lt;ford@theguide.com&gt;'</span>,</div><div class="line">  <span class="string">'"Arthur Dent" &lt;has.no.tea@gmail.com&gt;'</span>,</div><div class="line">  <span class="string">'"Marvin the Paranoid Android" &lt;marv@googlemail.com&gt;'</span>,</div><div class="line">  <span class="string">'the.mice@magrathea.com'</span></div><div class="line">];</div><div class="line"><span class="comment">// Used in a method call.</span></div><div class="line">goog.dom.createDom(goog.dom.TagName.DIV, {</div><div class="line">  id: <span class="string">'foo'</span>,</div><div class="line">  className: <span class="string">'some-css-class'</span>,</div><div class="line">  style: <span class="string">'display:none'</span></div><div class="line">}, <span class="string">'Hello, world!'</span>);</div></pre></td></tr></table></figure>

<p>函数参数<br>尽量让函数参数在同一行上. 如果一行超过 80 字符, 每个参数独占一行, 并以4个空格缩进, 或者与括号对齐, 以提高可读性. 尽可能不要让每行超过80个字符. 比如下面这样:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Four-space, wrap at 80.  Works with very long function names, survives</span></div><div class="line"><span class="comment">// renaming without reindenting, low on space.</span></div><div class="line">goog.foo.bar.doThingThatIsVeryDifficultToExplain = <span class="function"><span class="keyword">function</span><span class="params">(</span></span></div><div class="line">    veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,</div><div class="line">    tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">};</div><div class="line"><span class="comment">// Four-space, one argument per line.  Works with long function names,</span></div><div class="line"><span class="comment">// survives renaming, and emphasizes each argument.</span></div><div class="line">goog.foo.bar.doThingThatIsVeryDifficultToExplain = <span class="function"><span class="keyword">function</span><span class="params">(</span></span></div><div class="line">    veryDescriptiveArgumentNumberOne,</div><div class="line">    veryDescriptiveArgumentTwo,</div><div class="line">    tableModelEventHandlerProxy,</div><div class="line">    artichokeDescriptorAdapterIterator) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">};</div><div class="line"><span class="comment">// Parenthesis-aligned indentation, wrap at 80.  Visually groups arguments,</span></div><div class="line"><span class="comment">// low on space.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,</span></span></div><div class="line">             tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div><div class="line"><span class="comment">// Parenthesis-aligned, one argument per line.  Visually groups and</span></div><div class="line"><span class="comment">// emphasizes each individual argument.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">(veryDescriptiveArgumentNumberOne,</span></span></div><div class="line">             veryDescriptiveArgumentTwo,</div><div class="line">             tableModelEventHandlerProxy,</div><div class="line">             artichokeDescriptorAdapterIterator) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>传递匿名函数<br>如果参数中有匿名函数, 函数体从调用该函数的左边开始缩进2个空格, 而不是从 function 这个关键字开始. 这让匿名函数更加易读 (不要增加很多没必要的缩进让函数体显示在屏幕的右侧).</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> names = items.map(<span class="function"><span class="keyword">function</span><span class="params">(item)</span> </span>{</div><div class="line">                        <span class="keyword">return</span> item.name;</div><div class="line">                      });</div><div class="line">prefix.something.reallyLongFunctionName(<span class="string">'whatever'</span>, <span class="function"><span class="keyword">function</span><span class="params">(a1, a2)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (a1.equals(a2)) {</div><div class="line">    someOtherLongFunctionName(a1);</div><div class="line">  } <span class="keyword">else</span> {</div><div class="line">    andNowForSomethingCompletelyDifferent(a2.parrot);</div><div class="line">  }</div><div class="line">});</div></pre></td></tr></table></figure>

<p>更多的缩进<br>事实上, 除了 初始化数组和对象 , 和传递匿名函数外, 所有被拆开的多行文本要么选择与之前的表达式左对齐, 要么以4个(而不是2个)空格作为一缩进层次.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">someWonderfulHtml = <span class="string">''</span> +</div><div class="line">                    getEvenMoreHtml(someReallyInterestingValues, moreValues,</div><div class="line">                                    evenMoreParams, <span class="string">'a duck'</span>, <span class="literal">true</span>, <span class="number">72</span>,</div><div class="line">                                    slightlyMoreMonkeys(<span class="number">0xfff</span>)) +</div><div class="line">                    <span class="string">''</span>;</div><div class="line">thisIsAVeryLongVariableName =</div><div class="line">    hereIsAnEvenLongerOtherFunctionNameThatWillNotFitOnPrevLine();</div><div class="line">thisIsAVeryLongVariableName = <span class="string">'expressionPartOne'</span> + someMethodThatIsLong() +</div><div class="line">    thisIsAnEvenLongerOtherFunctionNameThatCannotBeIndentedMore();</div><div class="line">someValue = <span class="keyword">this</span>.foo(</div><div class="line">    shortArg,</div><div class="line">    <span class="string">'Some really long string arg - this is a pretty common case, actually.'</span>,</div><div class="line">    shorty2,</div><div class="line">    <span class="keyword">this</span>.bar());</div><div class="line"><span class="keyword">if</span> (searchableCollection(allYourStuff).contains(theStuffYouWant) &&</div><div class="line">    !ambientNotification.isActive() && (client.isAmbientSupported() ||</div><div class="line">                                        client.alwaysTryAmbientAnyways()) {</div><div class="line">  ambientNotification.activate();</div><div class="line">}</div></pre></td></tr></table></figure>

<p>空行<br>使用空行来划分一组逻辑上相关联的代码片段.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">doSomethingTo(x);</div><div class="line">doSomethingElseTo(x);</div><div class="line">andThen(x);</div><div class="line">nowDoSomethingWith(y);</div><div class="line">andNowWith(z);</div></pre></td></tr></table></figure>

<h3 id="二元和三元操作符">二元和三元操作符</h3>
<p>操作符始终跟随着前行, 这样就不用顾虑分号的隐式插入问题. 如果一行实在放不下, 还是按照上述的缩进风格来换行.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = a ? b : c;  <span class="comment">// All on one line if it will fit.</span></div><div class="line"><span class="comment">// Indentation +4 is OK.</span></div><div class="line"><span class="keyword">var</span> y = a ?</div><div class="line">    longButSimpleOperandB : longButSimpleOperandC;</div><div class="line"><span class="comment">// Indenting to the line position of the first operand is also OK.</span></div><div class="line"><span class="keyword">var</span> z = a ?</div><div class="line">        moreComplicatedB :</div><div class="line">        moreComplicatedC;</div></pre></td></tr></table></figure>

<p>括号<br>只在需要的时候使用<br>不要滥用括号, 只在必要的时候使用它.<br>对于一元操作符(如delete, typeof 和 void ), 或是在某些关键词(如 return, throw, case, new )之后, 不要使用括号.<br>字符串<br>使用 ‘ 优于 “<br>无论你选择单引号还是双引号都无所谓，在 JavaScript 中它们在解析上没有区别。而绝对需要强制的是一致性。 永远不要在同一个项目中混用两种引号，选择一种，并保持一致。<br>单引号 (‘) 优于双引号 (“). 当你创建一个包含 HTML 代码的字符串时就知道它的好处了.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msg = <span class="string">'This is some HTML'</span>;</div></pre></td></tr></table></figure>

<p>前置逗号（Comma First）<br>请勿使用。所有使用这个文档作为基本风格指南的项目都不允许前置逗号的代码格式，除非明确指定或者作者要求。<br>注释<br>单行注释放于代码上方为首选<br>多行也可以<br>行末注释应被避免!<br>JSDoc 的方式也不错，但需要比较多的时间<br>使用 JSDoc<br>我们使用 JSDoc 中的注释风格. 行内注释使用 // 变量 的形式. 另外, 我们也遵循 C++ 代码注释风格 . 这也就是说你需要:<br>版权和著作权的信息,<br>文件注释中应该写明该文件的基本信息(如, 这段代码的功能摘要, 如何使用, 与哪些东西相关), 来告诉那些不熟悉代码的读者.<br>类, 函数, 变量和必要的注释,<br>期望在哪些浏览器中执行,<br>正确的大小写, 标点和拼写.<br>为了避免出现句子片段, 请以合适的大/小写单词开头, 并以合适的标点符号结束这个句子.<br>现在假设维护这段代码的是一位初学者. 这可能正好是这样的!<br>目前很多编译器可从 JSDoc 中提取类型信息, 来对代码进行验证, 删除和压缩. 因此, 你很有必要去熟悉正确完整的 JSDoc .<br>顶层/文件注释<br>顶层注释用于告诉不熟悉这段代码的读者这个文件中包含哪些东西. 应该提供文件的大体内容, 它的作者, 依赖关系和兼容性信息. 如下:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Copyright 2009 Google Inc. All Rights Reserved.</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * @fileoverview Description of file, its uses and information</div><div class="line"> * about its dependencies.</div><div class="line"> * @author user@google.com (Firstname Lastname)</div><div class="line"> */</div></pre></td></tr></table></figure>

<p>类注释<br>每个类的定义都要附带一份注释, 描述类的功能和用法. 也需要说明构造器参数. 如果该类继承自其它类, 应该使用 @extends 标记. 如果该类是对接口的实现, 应该使用 @implements 标记.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Class making something fun and easy.</div><div class="line"> * @param {string} arg1 An argument that makes this more interesting.</div><div class="line"> * @param {Array.&lt;number&gt;} arg2 List of numbers to be processed.</div><div class="line"> * @constructor</div><div class="line"> * @extends {goog.Disposable}</div><div class="line"> */</div><div class="line">project.MyClass = <span class="function"><span class="keyword">function</span><span class="params">(arg1, arg2)</span> </span>{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">};</div><div class="line">goog.inherits(project.MyClass, goog.Disposable);</div></pre></td></tr></table></figure>

<p>方法与函数的注释<br>提供参数的说明. 使用完整的句子, 并用第三人称来书写方法说明.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Converts text to some completely different text.</div><div class="line"> * @param {string} arg1 An argument that makes this more interesting.</div><div class="line"> * @return {string} Some return value.</div><div class="line"> */</div><div class="line">project.MyClass.prototype.someMethod = <span class="function"><span class="keyword">function</span><span class="params">(arg1)</span> </span>{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">};</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Operates on an instance of MyClass and returns something.</div><div class="line"> * @param {project.MyClass} obj Instance of MyClass which leads to a long</div><div class="line"> *     comment that needs to be wrapped to two lines.</div><div class="line"> * @return {boolean} Whether something occured.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">PR_someMethod</span><span class="params">(obj)</span> </span>{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>对于一些简单的, 不带参数的 getters, 说明可以忽略.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @return {Element} The element for the component.</div><div class="line"> */</div><div class="line">goog.ui.Component.prototype.getElement = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.element_;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>属性注释<br>也需要对属性进行注释.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Maximum number of things per pane.</div><div class="line"> * @type {number}</div><div class="line"> */</div><div class="line">project.MyClass.prototype.someProperty = <span class="number">4</span>;</div></pre></td></tr></table></figure>

<p>JSDoc 缩进<br>如果你在 @param, @return, @supported, @this 或 @deprecated 中断行, 需要像在代码中一样, 使用4个空格作为一个缩进层次.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Illustrates line wrapping for long param/return descriptions.</div><div class="line"> * @param {string} foo This is a param with a description too long to fit in</div><div class="line"> *     one line.</div><div class="line"> * @return {number} This returns something that has a description too long to</div><div class="line"> *     fit in one line.</div><div class="line"> */</div><div class="line">project.MyClass.prototype.method = <span class="function"><span class="keyword">function</span><span class="params">(foo)</span> </span>{</div><div class="line">  <span class="keyword">return</span> <span class="number">5</span>;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>不要在 @fileoverview 标记中进行缩进.<br>虽然不建议, 但也可对说明文字进行适当的排版对齐. 不过, 这样带来一些负面影响, 就是当你每次修改变量名时, 都得重新排版说明文字以保持和变量名对齐.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * This is NOT the preferred indentation method.</div><div class="line"> * @param {string} foo This is a param with a description too long to fit in</div><div class="line"> *                     one line.</div><div class="line"> * @return {number} This returns something that has a description too long to</div><div class="line"> *                  fit in one line.</div><div class="line"> */</div><div class="line">project.MyClass.prototype.method = <span class="function"><span class="keyword">function</span><span class="params">(foo)</span> </span>{</div><div class="line">  <span class="keyword">return</span> <span class="number">5</span>;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>枚举</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Enum for tri-state values.</div><div class="line"> * @enum {number}</div><div class="line"> */</div><div class="line">project.TriState = {</div><div class="line">  TRUE: <span class="number">1</span>,</div><div class="line">  FALSE: -<span class="number">1</span>,</div><div class="line">  MAYBE: <span class="number">0</span></div><div class="line">};</div></pre></td></tr></table></figure>

<p>注意一下, 枚举也具有有效类型, 所以可以当成参数类型来用.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Sets project state.</div><div class="line"> * @param {project.TriState} state New project state.</div><div class="line"> */</div><div class="line">project.setState = <span class="function"><span class="keyword">function</span><span class="params">(state)</span> </span>{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">};</div></pre></td></tr></table></figure>

<p>JavaScript 语言规范<br>变量<br>声明变量必须加上 var 关键字.<br>当你没有写 var, 变量就会暴露在全局上下文中, 这样很可能会和现有变量冲突. 另外, 如果没有加上, 很难明确该变量的作用域是什么, 变量也很可能像在局部作用域中, 很轻易地泄漏到 Document 或者 Window 中, 所以务必用 var 去声明变量.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 变量</span></div><div class="line"><span class="keyword">var</span> foo = <span class="string">"bar"</span>,</div><div class="line">  num = <span class="number">1</span>,</div><div class="line">  undef;</div><div class="line"><span class="comment">// 字面量标识:</span></div><div class="line"><span class="keyword">var</span> array = [],</div><div class="line">  object = {};</div><div class="line"><span class="comment">// 在一个作用域（函数）内只使用一个 `var` 有助于提升可读性</span></div><div class="line"><span class="comment">// 并且让你的声明列表变得有条不紊 (还帮你省了几次键盘敲击)</span></div><div class="line"><span class="comment">// 不好</span></div><div class="line"><span class="keyword">var</span> foo = <span class="string">""</span>;</div><div class="line"><span class="keyword">var</span> bar = <span class="string">""</span>;</div><div class="line"><span class="keyword">var</span> qux;</div><div class="line"><span class="comment">// 好的做法</span></div><div class="line"><span class="keyword">var</span> foo = <span class="string">""</span>,</div><div class="line">  bar = <span class="string">""</span>,</div><div class="line">  quux;</div><div class="line"><span class="comment">// 或者..</span></div><div class="line"><span class="keyword">var</span> <span class="comment">// 对这些变量的注释</span></div><div class="line">foo = <span class="string">""</span>,</div><div class="line">bar = <span class="string">""</span>,</div><div class="line">quux;</div><div class="line"><span class="comment">// `var` 语句必须总是在各自作用域（函数）顶部</span></div><div class="line"><span class="comment">// 同样适应于来自 ECMAScript 6 的常量</span></div><div class="line"><span class="comment">// 不好</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// 在变量前有语句</span></div><div class="line">  <span class="keyword">var</span> bar = <span class="string">""</span>,</div><div class="line">    qux;</div><div class="line">}</div><div class="line"><span class="comment">// 好</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">var</span> bar = <span class="string">""</span>,</div><div class="line">    qux;</div><div class="line">  <span class="comment">// 所有语句都在变量之后</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>常量<br>常量的形式如: NAMES_LIKE_THIS, 即使用大写字符, 并用下划线分隔. 你也可用 @const 标记来指明它是一个常量. 但请永远不要使用 const 关键词.<br>Decision:<br>对于基本类型的常量, 只需转换命名.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * The number of seconds in a minute.</div><div class="line"> * @type {number}</div><div class="line"> */</div><div class="line">goog.example.SECONDS_IN_A_MINUTE = <span class="number">60</span>;</div></pre></td></tr></table></figure>

<p>对于非基本类型, 使用 @const 标记.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * The number of seconds in each of the given units.</div><div class="line"> * @type {Object.&lt;number&gt;}</div><div class="line"> * @const</div><div class="line"> */</div><div class="line">goog.example.SECONDS_TABLE = {</div><div class="line">  minute: <span class="number">60</span>,</div><div class="line">  hour: <span class="number">60</span> * <span class="number">60</span>,</div><div class="line">  day: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>这标记告诉编译器它是常量.<br>至于关键词 const, 因为 IE 不能识别, 所以不要使用.<br>分号<br>总是使用分号.<br>如果仅依靠语句间的隐式分隔, 有时会很麻烦. 你自己更能清楚哪里是语句的起止. 而且有些情况下, 漏掉分号会很危险，可能会导致代码合并错误等，又比如:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.</span></div><div class="line">MyClass.prototype.myMethod = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> <span class="number">42</span>;</div><div class="line">}  <span class="comment">// No semicolon here.</span></div><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// Some initialization code wrapped in a function to create a scope for locals.</span></div><div class="line">})();</div><div class="line"><span class="keyword">var</span> THINGS_TO_EAT = [apples, oysters, sprayOnCheese]  <span class="comment">// No semicolon here.</span></div><div class="line"><span class="comment">// 2. conditional execution a la bash</span></div><div class="line">-<span class="number">1</span> == resultOfOperation() || die();</div></pre></td></tr></table></figure>

<p>这段代码会发生些什么诡异事呢?<br>报 JavaScript 错误 - 例子1上的语句会解释成, 一个函数带一匿名函数作为参数而被调用, 返回42后, 又一次被”调用”, 这就导致了错误.<br>当 resultOfOperation() 返回非 NaN 时, 就会调用die, 其结果也会赋给 THINGS_TO_EAT.<br>为什么?<br>JavaScript 的语句以分号作为结束符, 除非可以非常准确推断某结束位置才会省略分号. 上面的例子产出错误, 均是在语句中声明了函数/对象/数组直接量, 但 闭括号(‘}’或’]’)并不足以表示该语句的结束. 在 JavaScript 中, 只有当语句后的下一个符号是后缀或括号运算符时, 才会认为该语句的结束. 参考：JS分号自动插入机制<br>遗漏分号有时会出现很奇怪的结果, 所以确保语句以分号结束.<br>块内函数声明<br>不要在块内声明一个函数，不要写成:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (x) {</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>{}</div><div class="line">}</div></pre></td></tr></table></figure>

<p>虽然很多 JS 引擎都支持块内声明函数, 但它不属于 ECMAScript 规范 (见 ECMA-262, 第13和14条). 各个浏览器糟糕的实现相互不兼容, 有些也与未来 ECMAScript 草案相违背. ECMAScript 只允许在脚本的根语句或函数中声明函数. 如果确实需要在块中定义函数, 建议使用函数表达式来初始化变量:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (x) {</div><div class="line">  <span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{}</div><div class="line">}</div></pre></td></tr></table></figure>

<p>标准特性<br>标准特性总是优于非标准特性.<br>最大化可移植性和兼容性, 尽量使用标准方法而不是用非标准方法, (比如, 优先用string.charAt(3) 而不用 string[3] , 通过 DOM 原生函数访问元素, 而不是使用应用封装好的快速接口.<br>不要封装基本类型<br>没有任何理由去封装基本类型, 另外还存在一些风险:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</div><div class="line"><span class="keyword">if</span> (x) {</div><div class="line">  alert(<span class="string">'hi'</span>);  <span class="comment">// Shows 'hi'.</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>除非明确用于类型转换, 其他情况请千万不要这样做！</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="built_in">Boolean</span>(<span class="number">0</span>);</div><div class="line"><span class="keyword">if</span> (x) {</div><div class="line">  alert(<span class="string">'hi'</span>);  <span class="comment">// This will never be alerted.</span></div><div class="line">}</div></pre></td></tr></table></figure>



<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span>(<span class="number">0</span>) == <span class="string">'boolean'</span>;</div><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="number">0</span>) == <span class="string">'object'</span>;</div></pre></td></tr></table></figure>

<p>有时用作 number, string 或 boolean时, 类型的转换会非常实用.<br>闭包<br>可以, 但小心使用.<br>闭包也许是 JS 中最有用的特性了. 有一份比较好的介绍闭包原理的文档.<br>有一点需要牢记, 闭包保留了一个指向它封闭作用域的指针, 所以, 在给 DOM 元素附加闭包时, 很可能会产生循环引用, 进一步导致内存泄漏. 比如下面的代码:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(element, a, b)</span> </span>{</div><div class="line">  element.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ <span class="comment">/* uses a and b */</span> };</div><div class="line">}</div></pre></td></tr></table></figure>

<p>这里, 即使没有使用 element, 闭包也保留了 element, a 和 b 的引用, 由于 element 也保留了对闭包的引用, 这就产生了循环引用, 这就不能被 GC 回收. 这种情况下, 可将代码重构为:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(element, a, b)</span> </span>{</div><div class="line">  element.onclick = bar(a, b);</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">(a, b)</span> </span>{</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ <span class="comment">/* uses a and b */</span> }</div><div class="line">}</div><div class="line"><span class="built_in">eval</span>()</div></pre></td></tr></table></figure>

<p>只用于解析序列化串 (如: 解析 RPC 响应), 而且解析序列号字符串用JSON.parse()会更好，所以最好放弃使用 eval().<br>eval() 会让程序执行的比较混乱, 当 eval() 里面包含用户输入的话就更加危险. 可以用其他更佳的, 更清晰, 更安全的方式写你的代码, 所以一般情况下请不要使用 eval(). 当碰到一些需要解析序列化串的情况下(如, 计算 RPC 响应), 使用 eval 很容易实现.<br>解析序列化串是指将字节流转换成内存中的数据结构. 比如, 你可能会将一个对象输出成文件形式:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">users = [</div><div class="line">  {</div><div class="line">    name: <span class="string">'Eric'</span>,</div><div class="line">    id: <span class="number">37824</span>,</div><div class="line">    email: <span class="string">'jellyvore@myway.com'</span></div><div class="line">  },</div><div class="line">  {</div><div class="line">    name: <span class="string">'xtof'</span>,</div><div class="line">    id: <span class="number">31337</span>,</div><div class="line">    email: <span class="string">'b4d455h4x0r@google.com'</span></div><div class="line">  },</div><div class="line">  ...</div><div class="line">];</div></pre></td></tr></table></figure>

<p>很简单地调用 eval 后, 把表示成文件的数据读取回内存中.<br>类似的, eval() 对 RPC 响应值进行解码. 例如, 你在使用 XMLHttpRequest 发出一个 RPC 请求后, 通过 eval () 将服务端的响应文本转成 JavaScript 对象:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> userOnline = <span class="literal">false</span>;</div><div class="line"><span class="keyword">var</span> user = <span class="string">'nusrat'</span>;</div><div class="line"><span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">xmlhttp.open(<span class="string">'GET'</span>, <span class="string">'http://chat.google.com/isUserOnline?user='</span> + user, <span class="literal">false</span>);</div><div class="line">xmlhttp.send(<span class="string">''</span>);</div><div class="line"><span class="comment">// Server returns:</span></div><div class="line"><span class="comment">// userOnline = true;</span></div><div class="line"><span class="keyword">if</span> (xmlhttp.status == <span class="number">200</span>) {</div><div class="line">  <span class="built_in">eval</span>(xmlhttp.responseText);</div><div class="line">}</div><div class="line"><span class="comment">// userOnline is now true.</span></div><div class="line"><span class="keyword">with</span>() {}</div></pre></td></tr></table></figure>

<p>不要使用<br>使用 with 让你的代码在语义上变得不清晰. 因为 with 的对象, 可能会与局部变量产生冲突, 从而改变你程序原本的用义. 下面的代码是干嘛的?</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> (foo) {</div><div class="line">  <span class="keyword">var</span> x = <span class="number">3</span>;</div><div class="line">  <span class="keyword">return</span> x;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>答案: 任何事. 局部变量 x 可能被 foo 的属性覆盖, 当它定义一个 setter 时, 在赋值 3 后会执行很多其他代码. 所以不要使用 with 语句.<br>this<br>仅在对象构造器, 方法, 闭包中使用.<br>this 的语义很特别. 有时它引用一个全局对象(大多数情况下), 调用者的作用域(使用 eval时), DOM 树中的节点(添加事件处理函数时), 新创建的对象(使用一个构造器), 或者其他对象(如果函数被 call() 或 apply()).<br>使用时很容易出错, 所以只有在下面两个情况时才能使用:<br>在构造器中<br>对象的方法(包括创建的闭包)中<br>for-in 循环<br>只用于 object/map/hash 的遍历<br>对 Array 用 for-in 循环有时会出错. 因为它并不是从 0 到 length - 1 进行遍历, 而是所有出现在对象及其原型链的键值. 下面就是一些失败的使用案例:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArray</span><span class="params">(arr)</span> </span>{</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> arr) {</div><div class="line">    print(arr[key]);</div><div class="line">  }</div><div class="line">}</div><div class="line">printArray([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);  <span class="comment">// This works.</span></div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</div><div class="line">printArray(a);  <span class="comment">// This is wrong.</span></div><div class="line">a = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'*'</span>);</div><div class="line">printArray(a);  <span class="comment">// This is wrong.</span></div><div class="line">a = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">a.buhu = <span class="string">'wine'</span>;</div><div class="line">printArray(a);  <span class="comment">// This is wrong again.</span></div><div class="line">a = <span class="keyword">new</span> <span class="built_in">Array</span>;</div><div class="line">a[<span class="number">3</span>] = <span class="number">3</span>;</div><div class="line">printArray(a);  <span class="comment">// This is wrong again.</span></div><div class="line"><span class="comment">// 而遍历数组通常用最普通的 for 循环.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printArray</span><span class="params">(arr)</span> </span>{</div><div class="line">  <span class="keyword">var</span> l = arr.length;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; l; i++) {</div><div class="line">    print(arr[i]);</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>多行字符串<br>不要使用. 不要这样写长字符串:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myString = <span class="string">'A rather long string of English text, an error message \</span></div><div class="line">                actually that just keeps going and going -- an error \</div><div class="line">                message to make the Energizer bunny blush (right through \</div><div class="line">                those Schwarzenegger shades)! Where was I? Oh yes, \</div><div class="line">                you\'ve got an error and all the extraneous whitespace is \</div><div class="line">                just gravy.  Have a nice day.';</div></pre></td></tr></table></figure>

<p>在编译时, 不能忽略行起始位置的空白字符; “\” 后的空白字符会产生奇怪的错误; 虽然大多数脚本引擎支持这种写法, 但它不是 ECMAScript 的标准规范.<br>Array 和 Object 直接量<br>使用 Array 和 Object 语法, 而不使用 Array 和 Object 构造器.<br>使用 Array 构造器很容易因为传参不恰当导致错误.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Length is 3.</span></div><div class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1, x2, x3);</div><div class="line"><span class="comment">// Length is 2.</span></div><div class="line"><span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1, x2);</div><div class="line"><span class="comment">// If x1 is a number and it is a natural number the length will be x1.</span></div><div class="line"><span class="comment">// If x1 is a number but not a natural number this will throw an exception.</span></div><div class="line"><span class="comment">// Otherwise the array will have one element with x1 as its value.</span></div><div class="line"><span class="keyword">var</span> a3 = <span class="keyword">new</span> <span class="built_in">Array</span>(x1);</div><div class="line"><span class="comment">// Length is 0.</span></div><div class="line"><span class="keyword">var</span> a4 = <span class="keyword">new</span> <span class="built_in">Array</span>();</div></pre></td></tr></table></figure>

<p>如果传入一个参数而不是2个参数, 数组的长度很有可能就不是你期望的数值了.<br>为了避免这些歧义, 我们应该使用更易读的直接量来声明.</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [x1, x2, x3];</div><div class="line"><span class="keyword">var</span> a2 = [x1, x2];</div><div class="line"><span class="keyword">var</span> a3 = [x1];</div><div class="line"><span class="keyword">var</span> a4 = [];</div></pre></td></tr></table></figure>

<p>虽然 Object 构造器没有上述类似的问题, 但鉴于可读性和一致性考虑, 最好还是在字面上更清晰地指明. 例如：</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">o2.a = <span class="number">0</span>;</div><div class="line">o2.b = <span class="number">1</span>;</div><div class="line">o2.c = <span class="number">2</span>;</div><div class="line">o2[<span class="string">'strange key'</span>] = <span class="number">3</span>;</div></pre></td></tr></table></figure>

<p>应该写成:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = {};</div><div class="line"><span class="keyword">var</span> o2 = {</div><div class="line">  a: <span class="number">0</span>,</div><div class="line">  b: <span class="number">1</span>,</div><div class="line">  c: <span class="number">2</span>,</div><div class="line">  <span class="string">'strange key'</span>: <span class="number">3</span></div><div class="line">};</div></pre></td></tr></table></figure>

<p>不要修改内置对象的原型<br>千万不要修改内置对象, 如 Object.prototype 和 Array.prototype 的原型. 而修改内置对象, 如 Function.prototype 的原型, 虽然少危险些, 但仍会导致调试时的诡异现象. 所以也要避免修改其原型.<br>JavaScript 小技巧(Tips and Tricks)<br>True 和 False 布尔表达式<br>下面的布尔表达式都返回 false:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="literal">null</span></div><div class="line"><span class="literal">undefined</span></div><div class="line"><span class="string">''</span>          <span class="comment">// 空字符串</span></div><div class="line"><span class="number">0</span>           <span class="comment">//数字0</span></div></pre></td></tr></table></figure>

<p>但小心下面的, 可都返回 true:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">'0'</span>   <span class="comment">// 字符串0</span></div><div class="line">[]    <span class="comment">// 空数组</span></div><div class="line">{}    <span class="comment">// 空对象</span></div></pre></td></tr></table></figure>

<p>下面段比较糟糕的代码:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (x != <span class="literal">null</span>) {</div></pre></td></tr></table></figure>

<p>你可以直接写成下面的形式(只要你希望 x 不是 0 和空字符串, 和 false):</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (x) {</div></pre></td></tr></table></figure>

<p>如果你想检查字符串是否为 null 或空:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (y != <span class="literal">null</span> && y != <span class="string">''</span>) {</div></pre></td></tr></table></figure>

<p>但这样会更好:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (y) {</div></pre></td></tr></table></figure>

<p>注意: 还有很多需要注意的地方, 如:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Boolean</span>(<span class="string">'0'</span>) == <span class="literal">true</span></div><div class="line"><span class="string">'0'</span> != <span class="literal">true</span></div><div class="line"><span class="number">0</span> != <span class="literal">null</span></div><div class="line"><span class="number">0</span> == []</div><div class="line"><span class="number">0</span> == <span class="literal">false</span></div><div class="line"><span class="built_in">Boolean</span>(<span class="literal">null</span>) == <span class="literal">false</span></div><div class="line"><span class="literal">null</span> != <span class="literal">true</span></div><div class="line"><span class="literal">null</span> != <span class="literal">false</span></div><div class="line"><span class="built_in">Boolean</span>(<span class="literal">undefined</span>) == <span class="literal">false</span></div><div class="line"><span class="literal">undefined</span> != <span class="literal">true</span></div><div class="line"><span class="literal">undefined</span> != <span class="literal">false</span></div><div class="line"><span class="built_in">Boolean</span>([]) == <span class="literal">true</span></div><div class="line">[] != <span class="literal">true</span></div><div class="line">[] == <span class="literal">false</span></div><div class="line"><span class="built_in">Boolean</span>({}) == <span class="literal">true</span></div><div class="line">{} != <span class="literal">true</span></div><div class="line">{} != <span class="literal">false</span></div><div class="line">条件(三元)操作符 (?:)</div></pre></td></tr></table></figure>

<p>三元操作符用于替代下面的代码:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (val != <span class="number">0</span>) {</div><div class="line">  <span class="keyword">return</span> foo();</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">  <span class="keyword">return</span> bar();</div><div class="line">}</div></pre></td></tr></table></figure>

<p>你可以写成:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> val ? foo() : bar();</div></pre></td></tr></table></figure>

<p>在生成 HTML 代码时也是很有用的:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> html = <span class="string">'&lt;input type="checkbox"'</span> +</div><div class="line">    (isChecked ? <span class="string">' checked'</span> : <span class="string">''</span>) +</div><div class="line">    (isEnabled ? <span class="string">''</span> : <span class="string">' disabled'</span>) +</div><div class="line">    <span class="string">' name="foo"&gt;'</span>;</div></pre></td></tr></table></figure>

<p>&amp;&amp; 和 ||<br>二元布尔操作符是可短路的, 只有在必要时才会计算到最后一项.<br>“||” 被称作为 ‘default’ 操作符, 因为可以这样:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** @param {*=} opt_win */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(opt_win)</span> </span>{</div><div class="line">  <span class="keyword">var</span> win;</div><div class="line">  <span class="keyword">if</span> (opt_win) {</div><div class="line">    win = opt_win;</div><div class="line">  } <span class="keyword">else</span> {</div><div class="line">    win = <span class="built_in">window</span>;</div><div class="line">  }</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>你可以使用它来简化上面的代码:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** @param {*=} opt_win */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(opt_win)</span> </span>{</div><div class="line">  <span class="keyword">var</span> win = opt_win || <span class="built_in">window</span>;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>“&amp;&amp;” 也可简短代码.比如:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (node) {</div><div class="line">  <span class="keyword">if</span> (node.kids) {</div><div class="line">    <span class="keyword">if</span> (node.kids[index]) {</div><div class="line">      foo(node.kids[index]);</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>你可以像这样来使用:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (node && node.kids && node.kids[index]) {</div><div class="line">  foo(node.kids[index]);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>或者:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> kid = node && node.kids && node.kids[index];</div><div class="line"><span class="keyword">if</span> (kid) {</div><div class="line">  foo(kid);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>不过这样就有点儿过头了:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node && node.kids && node.kids[index] && foo(node.kids[index]);</div></pre></td></tr></table></figure>

<p>使用 join() 来创建字符串<br>通常是这样使用的:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">listHtml</span><span class="params">(items)</span> </span>{</div><div class="line">  <span class="keyword">var</span> html = <span class="string">'&lt;div class="foo"&gt;'</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; ++i) {</div><div class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) {</div><div class="line">      html += <span class="string">', '</span>;</div><div class="line">    }</div><div class="line">    html += itemHtml(items[i]);</div><div class="line">  }</div><div class="line">  html += <span class="string">'&lt;/div&gt;'</span>;</div><div class="line">  <span class="keyword">return</span> html;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>但这样在 IE 下非常慢, 可以用下面的方式:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">listHtml</span><span class="params">(items)</span> </span>{</div><div class="line">  <span class="keyword">var</span> html = [];</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; ++i) {</div><div class="line">    html[i] = itemHtml(items[i]);</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> <span class="string">'&lt;div class="foo"&gt;'</span> + html.join(<span class="string">', '</span>) + <span class="string">'&lt;/div&gt;'</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>你也可以是用数组作为字符串构造器, 然后通过 myArray.join(‘’) 转换成字符串. 不过由于赋值操作快于数组的 push(), 所以尽量使用赋值操作.<br>类型检测 (来源于 jQuery Core Style Guidelines)<br>直接类型（实际类型，Actual Types）</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>:</div><div class="line">  <span class="keyword">typeof</span> variable === <span class="string">"string"</span></div><div class="line"><span class="built_in">Number</span>:</div><div class="line">  <span class="keyword">typeof</span> variable === <span class="string">"number"</span></div><div class="line"><span class="built_in">Boolean</span>:</div><div class="line">  <span class="keyword">typeof</span> variable === <span class="string">"boolean"</span></div><div class="line"><span class="built_in">Object</span>:</div><div class="line">  <span class="keyword">typeof</span> variable === <span class="string">"object"</span></div><div class="line"><span class="built_in">Array</span>:</div><div class="line">  <span class="built_in">Array</span>.isArray(arrayLikeObject)</div><div class="line">  (如果可能的话)</div><div class="line">Node:</div><div class="line">  elem.nodeType === <span class="number">1</span></div><div class="line"><span class="literal">null</span>:</div><div class="line">  variable === <span class="literal">null</span></div><div class="line"><span class="literal">null</span> or <span class="literal">undefined</span>:</div><div class="line">  variable == <span class="literal">null</span></div><div class="line"><span class="literal">undefined</span>:</div><div class="line">全局变量:</div><div class="line"></div><div class="line">  <span class="keyword">typeof</span> variable === <span class="string">"undefined"</span></div><div class="line"></div><div class="line">局部变量:</div><div class="line"></div><div class="line">  variable === <span class="literal">undefined</span></div><div class="line"></div><div class="line">属性:</div><div class="line"></div><div class="line">  object.prop === <span class="literal">undefined</span></div><div class="line">  object.hasOwnProperty(prop)</div><div class="line">  <span class="string">"prop"</span> <span class="keyword">in</span> object</div></pre></td></tr></table></figure>

<p>转换类型（强制类型，Coerced Types）<br>考虑下面这个的含义…<br>给定的 HTML:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">id</span>=<span class="value">"foo-input"</span> <span class="attribute">value</span>=<span class="value">"1"</span>&gt;</span></div></pre></td></tr></table></figure>



<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// `foo` 已经被赋予值 `0`，类型为 `number`</span></div><div class="line"><span class="keyword">var</span> foo = <span class="number">0</span>;</div><div class="line"><span class="comment">// typeof foo;</span></div><div class="line"><span class="comment">// "number"</span></div><div class="line">...</div><div class="line"><span class="comment">// 在后续的代码中，你需要更新 `foo`，赋予在 input 元素中得到的新值</span></div><div class="line">foo = <span class="built_in">document</span>.getElementById(<span class="string">"foo-input"</span>).value;</div><div class="line"><span class="comment">// 如果你现在测试 `typeof foo`, 结果将是 `string`</span></div><div class="line"><span class="comment">// 这意味着你在 if 语句检测 `foo` 有类似于此的逻辑:</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="number">1</span>) {</div><div class="line">  importantTask();</div><div class="line">}</div><div class="line"><span class="comment">// `importantTask()` 将永远不会被执行，即使 `foo` 有一个值 "1"</span></div><div class="line"><span class="comment">// 你可以巧妙地使用 + / - 一元运算符强制转换类型以解决问题:</span></div><div class="line">foo = +<span class="built_in">document</span>.getElementById(<span class="string">"foo-input"</span>).value;</div><div class="line"><span class="comment">//    ^ + 一元运算符将它右边的运算对象转换为 `number`</span></div><div class="line"><span class="comment">// typeof foo;</span></div><div class="line"><span class="comment">// "number"</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="number">1</span>) {</div><div class="line">  importantTask();</div><div class="line">}</div><div class="line"><span class="comment">// `importantTask()` 将被调用</span></div></pre></td></tr></table></figure>

<p>对于强制类型转换这里有几个例子:</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> number = <span class="number">1</span>,</div><div class="line">  string = <span class="string">"1"</span>,</div><div class="line">  bool = <span class="literal">false</span>;</div><div class="line">number;</div><div class="line"><span class="comment">// 1</span></div><div class="line">number + <span class="string">""</span>;</div><div class="line"><span class="comment">// "1"</span></div><div class="line">string;</div><div class="line"><span class="comment">// "1"</span></div><div class="line">+string;</div><div class="line"><span class="comment">// 1</span></div><div class="line">+string++;</div><div class="line"><span class="comment">// 1</span></div><div class="line">string;</div><div class="line"><span class="comment">// 2</span></div><div class="line">bool;</div><div class="line"><span class="comment">// false</span></div><div class="line">+bool;</div><div class="line"><span class="comment">// 0</span></div><div class="line">bool + <span class="string">""</span>;</div><div class="line"><span class="comment">// "false"</span></div></pre></td></tr></table></figure>



<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> number = <span class="number">1</span>,</div><div class="line">  string = <span class="string">"1"</span>,</div><div class="line">  bool = <span class="literal">true</span>;</div><div class="line">string === number;</div><div class="line"><span class="comment">// false</span></div><div class="line">string === number + <span class="string">""</span>;</div><div class="line"><span class="comment">// true</span></div><div class="line">+string === number;</div><div class="line"><span class="comment">// true</span></div><div class="line">bool === number;</div><div class="line"><span class="comment">// false</span></div><div class="line">+bool === number;</div><div class="line"><span class="comment">// true</span></div><div class="line">bool === string;</div><div class="line"><span class="comment">// false</span></div><div class="line">bool === !!string;</div><div class="line"><span class="comment">// true</span></div></pre></td></tr></table></figure>



<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="number">2.5</span>;</div><div class="line"><span class="built_in">parseInt</span>(num, <span class="number">10</span>);</div><div class="line"><span class="comment">// 等价于...</span></div><div class="line">~~num;</div><div class="line">num &gt;&gt; <span class="number">0</span>;</div><div class="line">num &gt;&gt;&gt; <span class="number">0</span>;</div><div class="line"><span class="comment">// 结果都是 2</span></div><div class="line"><span class="comment">// 时刻牢记心底, 负值将被区别对待...</span></div><div class="line"><span class="keyword">var</span> neg = -<span class="number">2.5</span>;</div><div class="line"><span class="built_in">parseInt</span>(neg, <span class="number">10</span>);</div><div class="line"><span class="comment">// 等价于...</span></div><div class="line">~~neg;</div><div class="line">neg &gt;&gt; <span class="number">0</span>;</div><div class="line"><span class="comment">// 结果都是 -2</span></div><div class="line"><span class="comment">// 但是...</span></div><div class="line">neg &gt;&gt;&gt; <span class="number">0</span>;</div><div class="line"><span class="comment">// 结果即是 4294967294</span></div></pre></td></tr></table></figure>

<p>字符串转换为整数<br>将字符串转换为整数有以下几种方式，可以在这里进行测试对比：</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> number1 = <span class="string">"45"</span>;</div><div class="line"><span class="comment">// ParseInt() Test on chrome for mac:31% slower</span></div><div class="line"><span class="keyword">var</span> i = <span class="built_in">parseInt</span>(number1);</div><div class="line"><span class="comment">// Using unary Test on chrome for mac:67% slower</span></div><div class="line"><span class="keyword">var</span> j = +number1;</div><div class="line"><span class="comment">// Number constructor Test on chrome for mac:59% slower</span></div><div class="line"><span class="keyword">var</span> k = <span class="built_in">Number</span>(number1);</div><div class="line"><span class="comment">// By multplication Test on chrome for mac:69% slower</span></div><div class="line"><span class="keyword">var</span> l = number1 * <span class="number">1</span>;</div><div class="line"><span class="comment">// parseInt with Test on chrome for mac:radix ±3.85% fastest</span></div><div class="line"><span class="keyword">var</span> m = <span class="built_in">parseInt</span>(number1, <span class="number">10</span>);</div></pre></td></tr></table></figure>

<p>所以推荐使用 parseInt(number1, 10) 这种方式，不过 +number1 更为简单，在操作次数极少的情况下也可以酌情使用。<br>对比运算</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当只是判断一个 array 是否有长度，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (array.length &gt; <span class="number">0</span>) ...</div><div class="line"><span class="comment">// ...判断真伪, 请使用这种:</span></div><div class="line"><span class="keyword">if</span> (array.length) ...</div><div class="line"><span class="comment">// 当只是判断一个 array 是否为空，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (array.length === <span class="number">0</span>) ...</div><div class="line"><span class="comment">// ...判断真伪, 请使用这种:</span></div><div class="line"><span class="keyword">if</span> (!array.length) ...</div><div class="line"><span class="comment">// 当只是判断一个 string 是否为空，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (string !== <span class="string">""</span>) ...</div><div class="line"><span class="comment">// ...判断真伪, 请使用这种:</span></div><div class="line"><span class="keyword">if</span> (string) ...</div><div class="line"><span class="comment">// 当只是判断一个 string 是为空，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (string === <span class="string">""</span>) ...</div><div class="line"><span class="comment">// ...判断真伪, 请使用这种:</span></div><div class="line"><span class="keyword">if</span> (!string) ...</div><div class="line"><span class="comment">// 当只是判断一个引用是为真，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="literal">true</span>) ...</div><div class="line"><span class="comment">// ...判断只需像你所想，享受内置功能的好处:</span></div><div class="line"><span class="keyword">if</span> (foo) ...</div><div class="line"><span class="comment">// 当只是判断一个引用是为假，相对于使用这个:</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="literal">false</span>) ...</div><div class="line"><span class="comment">// ...使用叹号将其转换为真</span></div><div class="line"><span class="keyword">if</span> (!foo) ...</div><div class="line"><span class="comment">// ...需要注意的是：这个将会匹配 0, "", null, undefined, NaN</span></div><div class="line"><span class="comment">// 如果你 _必须_ 是布尔类型的 false，请这样用：</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="literal">false</span>) ...</div><div class="line"><span class="comment">// 如果想计算一个引用可能是 null 或者 undefined，但并不是 false, "" 或者 0,</span></div><div class="line"><span class="comment">// 相对于使用这个：</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="literal">null</span> || foo === <span class="literal">undefined</span>) ...</div><div class="line"><span class="comment">// ...享受 == 类型强制转换的好处，像这样:</span></div><div class="line"><span class="keyword">if</span> (foo == <span class="literal">null</span>) ...</div><div class="line"><span class="comment">// 谨记，使用 == 将会令 `null` 匹配 `null` 和 `undefined`</span></div><div class="line"><span class="comment">// 但不是 `false`，"" 或者 0</span></div><div class="line"><span class="literal">null</span> == <span class="literal">undefined</span></div></pre></td></tr></table></figure>

<p>总是判断最好、最精确的值，上述是指南而非教条。</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 类型转换和对比运算说明</span></div><div class="line"><span class="comment">// 首次 `===`，`==` 次之 (除非需要松散类型的对比)</span></div><div class="line"><span class="comment">// `===` 总不做类型转换，这意味着:</span></div><div class="line"><span class="string">"1"</span> === <span class="number">1</span>;</div><div class="line"><span class="comment">// false</span></div><div class="line"><span class="comment">// `==` 会转换类型，这意味着:</span></div><div class="line"><span class="string">"1"</span> == <span class="number">1</span>;</div><div class="line"><span class="comment">// true</span></div><div class="line"><span class="comment">// 布尔, 真 & 伪</span></div><div class="line"><span class="comment">// 布尔:</span></div><div class="line"><span class="literal">true</span>, <span class="literal">false</span></div><div class="line"><span class="comment">// 真:</span></div><div class="line"><span class="string">"foo"</span>, <span class="number">1</span></div><div class="line"><span class="comment">// 伪:</span></div><div class="line"><span class="string">""</span>, <span class="number">0</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="literal">NaN</span>, <span class="keyword">void</span> <span class="number">0</span></div><div class="line">Misc</div></pre></td></tr></table></figure>

<p>这个部分将要说明的想法和理念都并非教条。相反更鼓励对现存实践保持好奇，以尝试提供完成一般 JavaScript 编程任务的更好方案。<br>提前返回值提升代码的可读性并且没有太多性能上的差别</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 不好:</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnLate</span><span class="params">(foo)</span> </span>{</div><div class="line">  <span class="keyword">var</span> ret;</div><div class="line">  <span class="keyword">if</span> (foo) {</div><div class="line">    ret = <span class="string">"foo"</span>;</div><div class="line">  } <span class="keyword">else</span> {</div><div class="line">    ret = <span class="string">"quux"</span>;</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="comment">// 好:</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnEarly</span><span class="params">(foo)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (foo) {</div><div class="line">    <span class="keyword">return</span> <span class="string">"foo"</span>;</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> <span class="string">"quux"</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>for循环遍历</p>
<figure class="highlight javaScript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// for循环遍历:</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, l = arr.length; i &lt; l; i++){</div><div class="line">    <span class="comment">// doSomething here</span></div><div class="line">}</div><div class="line"><span class="comment">// 上面的方式优于:</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++){</div><div class="line">    <span class="comment">// doSomething here</span></div><div class="line">}</div><div class="line"><span class="comment">// 前一种方式只会计算一次 arr 的长度，而后一种方式会计算 arr.length + 1 次，效率比较低</span></div></pre></td></tr></table></figure>

<p>保持一致性.<br>当你在编辑代码之前, 先花一些时间查看一下现有代码的风格. 如果他们给算术运算符添加了空格, 你也应该添加. 如果他们的注释使用一个个星号盒子, 那么也请你使用这种方式.<br>代码风格中一个关键点是整理一份常用词汇表, 开发者认同它并且遵循, 这样在代码中就能统一表述. 我们在这提出了一些全局上的风格规则, 但也要考虑自身情况形成自己的代码风格. 但如果你添加的代码和现有的代码有很大的区别, 这就让阅读者感到很不和谐. 所以, 避免这种情况的发生.</p>

      
    </div>
    <footer>
      

        
          <div class="alignleft post-nav">
            <em>上一篇: </em><a href="/2014/05/19/python1/">Python常见问题</a>
          </div>
        
        
          <div class="alignright post-nav">
            <em>下一篇: </em><a href="/2014/04/28/python-mysql-restful/">python为mysql实现restful接口</a>
          </div>
          <div class="clearfix"></div>
        

        
          <div class="copyright">
            
              <span class="claim">版权声明：自由转载-非商用-无演绎-保持署名 @ Lawrence-zxc</span>
            
            
              <span class="from-link">
                <em>本文链接地址:</em>
                <a href="/2014/05/17/javascript/">
                  http://lawrence-zxc.github.io/2014/05/17/javascript/
                </a>
              </span>
            
          </div>
        
        
  
  <div class="categories">
    <a href="/categories/日志/">日志</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/JavaScript/">JavaScript</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_sinaweibo_like"></a>
    
    
      <a class="addthis_button_linkedin"></a>
    
    
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<nav id="pagination" >
    
    <a href="/2014/05/19/python1/" class="alignleft prev" >上一页</a>
    
    
    <a href="/2014/04/28/python-mysql-restful/" class="alignright next" >下一页</a>
    
    <div class="clearfix"></div>
</nav>

<section id="comment">
    <h1 class="title">留言</h1>
    <div id="disqus_thread">
    	<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="2014/05/17/javascript/" data-title="Java Script 编码规范" data-url="http://lawrence-zxc.github.io/2014/05/17/javascript/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"zxc337"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="text" name="q" results="0" placeholder="搜一下">
    <i class="icon-search"></i>
    <input type="hidden" name="q" value="site:lawrence-zxc.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Git/">Git</a><small>2</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>23</small></li>
  
    <li><a href="/tags/JavaScript/">JavaScript</a><small>4</small></li>
  
    <li><a href="/tags/LeetCode/">LeetCode</a><small>2</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>18</small></li>
  
    <li><a href="/tags/Mac-Unix/">Mac/Unix</a><small>1</small></li>
  
    <li><a href="/tags/Maven/">Maven</a><small>1</small></li>
  
    <li><a href="/tags/Mysql/">Mysql</a><small>2</small></li>
  
    <li><a href="/tags/Nginx/">Nginx</a><small>5</small></li>
  
    <li><a href="/tags/Oracle/">Oracle</a><small>4</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>3</small></li>
  
    <li><a href="/tags/XMPP/">XMPP</a><small>2</small></li>
  
    <li><a href="/tags/其他/">其他</a><small>0</small></li>
  
    <li><a href="/tags/开始/">开始</a><small>3</small></li>
  
    <li><a href="/tags/技术/">技术</a><small>1</small></li>
  
    <li><a href="/tags/旅行/">旅行</a><small>1</small></li>
  
    <li><a href="/tags/架构/">架构</a><small>2</small></li>
  
    <li><a href="/tags/生活/">生活</a><small>1</small></li>
  
    <li><a href="/tags/读书/">读书</a><small>0</small></li>
  
    <li><a href="/tags/随感/">随感</a><small>7</small></li>
  
  </ul>
</div>


  <div class="trace-invest">
    <span>
        <a href="https://github.com/Lawrence-zxc" target="_blank">欢迎光临我的技术Blog网站 </br>Fork me on Github</a>
    </span>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2015/04/04/jishu-hehuoren/">技术合伙人为什么喜欢谈钱胜过情怀？</a>
      </li>
    
      <li>
        <a href="/2015/04/01/reverse-o2o/">分享一个用户自发需求的反向O2O设想</a>
      </li>
    
      <li>
        <a href="/2015/03/08/shujiawang/">面向企业和个人O2O图书租赁服务设想</a>
      </li>
    
      <li>
        <a href="/2015/03/05/pingjiaapp/">关于电商商品评价评论独立第三方平台构想</a>
      </li>
    
      <li>
        <a href="/2015/01/23/suishoupai/">关于随手拍图片人脸识别APP需求的想法</a>
      </li>
    
      <li>
        <a href="/2014/11/25/xushen/">徐神的诗</a>
      </li>
    
      <li>
        <a href="/2014/11/20/openfire/">Openfire服务端错误解决</a>
      </li>
    
      <li>
        <a href="/2014/11/16/xmpp/">xmpp通信过程分析</a>
      </li>
    
      <li>
        <a href="/2014/11/10/oracle-index/">Oracle大批量高效地更新大数据表索引字段</a>
      </li>
    
      <li>
        <a href="/2014/11/10/oracle-partition/">Oracle Partition Common Usage</a>
      </li>
    
      <li>
        <a href="/2014/10/28/jvm-strace/">jvm退出的原因,使用strace定位</a>
      </li>
    
      <li>
        <a href="/2014/10/28/load-balancing/">负载均衡和过载保护</a>
      </li>
    
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <div id="go-pg-top"><i class="icon-arrow-up"></i></div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Jeck Zhang
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/page.js"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?a5eb19e532c0b101d72226b1325e6a78";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>

</html>